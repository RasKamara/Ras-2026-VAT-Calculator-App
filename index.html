<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RAS 2026 VAT Calculator</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{font-family:Segoe UI,Arial,sans-serif;background:#f4f4f4;margin:0}
.dark-mode{background:#121212;color:#e6e6e6}
.app-container{max-width:480px;margin:20px auto;background:#fff;padding:22px;border-radius:22px;box-shadow:0 8px 22px rgba(0,0,0,.1)}
.dark-mode .app-container{background:#1f1f1f}
h1{text-align:center;color:#007bff;margin-bottom:5px}
h6{text-align:center;color:#555;margin-top:0}
.dark-mode h6{color:#bbb}
label{font-weight:600;margin-top:12px;display:block}
input,button{width:100%;padding:12px;margin-top:6px;border-radius:12px;border:1px solid #bbb;font-size:1rem}
input[readonly]{background:#eef6ff;font-weight:bold}
.dark-mode input[readonly]{background:#1b2a3a;color:#fff}
button{background:#007bff;color:#fff;border:none;cursor:pointer}
button:hover{background:#7f00ff}
.toggle-buttons{display:flex;gap:5px;margin:15px 0}
.toggle-button{flex:1;font-weight:bold}
.toggle-button.active{background:#7f00ff}
.tab-container{display:none}
.tab-container.active{display:block}
.result-highlight{border:2px solid #007bff}
.toggle-row{display:flex;gap:10px;margin-top:10px}
.toggle-row label{font-weight:normal}
</style>
</head>

<body>

<button onclick="toggleDarkMode()" style="margin:10px">Toggle Dark Mode</button>

<div class="app-container">
<h1>RAS 2026 VAT CALCULATOR</h1>
<h6>Ghana VAT • NHIL • GETFund • CST • Tourism Levy</h6>

<div class="toggle-buttons">
  <button class="toggle-button active" onclick="showApp(0)">Cost</button>
  <button class="toggle-button" onclick="showApp(1)">VAT Inclusive</button>
  <button class="toggle-button" onclick="showApp(2)">Flat Rate</button>
</div>

<!-- ================= APP 1 ================= -->
<div id="app1" class="tab-container active">
<label>Cost</label>
<input type="number" id="cost">

<div class="toggle-row">
  <label><input type="checkbox" id="cstToggle"> Apply CST (5%)</label>
  <label><input type="checkbox" id="tourismToggle"> Apply Tourism Levy (1%)</label>
</div>

<button onclick="calculate1()">Calculate</button>
<button onclick="reset('app1')">Reset</button>

<label>NHIL (2.5%)</label><input id="nh" readonly>
<label>GETFund (2.5%)</label><input id="gf" readonly>
<label>CST (5%)</label><input id="cst1" readonly>
<label>Tourism Levy (1%)</label><input id="tourism1" readonly>
<label>VAT (15%)</label><input id="v" readonly>
<label>Total Levies</label><input id="t1" readonly class="result-highlight">
<label>VAT Inclusive</label><input id="vi" readonly>

<button onclick="exportPDF('Standard Rate')">Export PDF</button>
</div>

<!-- ================= APP 2 ================= -->
<div id="app2" class="tab-container">
<label>VAT Inclusive</label>
<input type="number" id="vi2">

<div class="toggle-row">
  <label><input type="checkbox" id="cstToggle2"> Apply CST (5%)</label>
  <label><input type="checkbox" id="tourismToggle2"> Apply Tourism Levy (1%)</label>
</div>

<button onclick="calculate2()">Calculate</button>
<button onclick="reset('app2')">Reset</button>

<label>NHIL</label><input id="nh2" readonly>
<label>GETFund</label><input id="gf2" readonly>
<label>CST</label><input id="cst2" readonly>
<label>Tourism Levy</label><input id="tourism2" readonly>
<label>VAT</label><input id="v2" readonly>
<label>Total Levies</label><input id="t2" readonly class="result-highlight">
<label>Cost</label><input id="c2" readonly>

<button onclick="exportPDF('VAT Inclusive')">Export PDF</button>
</div>

<!-- ================= APP 3 ================= -->
<div id="app3" class="tab-container">
<label>Cost</label>
<input type="number" id="c3">

<button onclick="calculate3()">Calculate</button>
<button onclick="reset('app3')">Reset</button>

<label>VAT (3%)</label><input id="v3" readonly>
<label>VAT Inclusive</label><input id="vi3" readonly>

<button onclick="exportPDF('Flat Rate Scheme')">Export PDF</button>
</div>
</div>

<script>
const fmt=n=>Number(n||0).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});

function toggleDarkMode(){document.body.classList.toggle("dark-mode")}
function showApp(i){
["app1","app2","app3"].forEach((id,x)=>{
document.getElementById(id).classList.toggle("active",x===i)
document.querySelectorAll(".toggle-button")[x].classList.toggle("active",x===i)
})
}
function reset(id){document.querySelectorAll("#"+id+" input").forEach(i=>{i.type==="checkbox"?i.checked=false:i.value=""})}

/* ---------- APP 1 ---------- */
function calculate1(){
  const c = +cost.value || 0;

  const nhilAmt = 0.025 * c;
  const getFundAmt = 0.025 * c;

  const cstAmt = cstToggle.checked ? 0.05 * c : 0;
  const tourismAmt = tourismToggle.checked ? 0.01 * c : 0;

  const vatAmt = 0.15 * c;

  const total = nhilAmt + getFundAmt + cstAmt + tourismAmt + vatAmt;

  nh.value = fmt(nhilAmt);
  gf.value = fmt(getFundAmt);
  cst1.value = cstToggle.checked ? fmt(cstAmt) : "—";
  tourism1.value = tourismToggle.checked ? fmt(tourismAmt) : "—";
  v.value = fmt(vatAmt);

  t1.value = fmt(total);
  vi.value = fmt(c + total);
}


/* ---------- APP 2 ---------- */
function calculate2(){
  const viVal = +vi2.value || 0;

  let rate = 0.20; // NHIL + GETFund + VAT

  if (cstToggle2.checked) rate += 0.05;
  if (tourismToggle2.checked) rate += 0.01;

  const c = viVal / (1 + rate);

  const nhilAmt = 0.025 * c;
  const getFundAmt = 0.025 * c;
  const cstAmt = cstToggle2.checked ? 0.05 * c : 0;
  const tourismAmt = tourismToggle2.checked ? 0.01 * c : 0;
  const vatAmt = 0.15 * c;

  const total = nhilAmt + getFundAmt + cstAmt + tourismAmt + vatAmt;

  nh2.value = fmt(nhilAmt);
  gf2.value = fmt(getFundAmt);
  cst2.value = cstToggle2.checked ? fmt(cstAmt) : "—";
  tourism2.value = tourismToggle2.checked ? fmt(tourismAmt) : "—";
  v2.value = fmt(vatAmt);

  t2.value = fmt(total);
  c2.value = fmt(c);
}

/* ---------- APP 3 ---------- */
function calculate3(){
const c=+c3.value||0;
const vat=0.03*c;
v3.value=fmt(vat);
vi3.value=fmt(c+vat);
}

/* ---------- PDF ---------- */
function exportPDF(type){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  let y = 20;

  pdf.setFont("helvetica","bold");
  pdf.setFontSize(16);
  pdf.text("RAS 2026 VAT TRANSACTION SUMMARY", 20, y);

  y += 10;
  pdf.setFontSize(11);
  pdf.setFont("helvetica","normal");
  pdf.text("Transaction Type: " + type, 20, y);
  pdf.text("Date: " + new Date().toLocaleString(), 20, y + 6);

  y += 18;

  // Detect active app
  const app1Active = document.getElementById("app1").classList.contains("active");
  const app2Active = document.getElementById("app2").classList.contains("active");
  const app3Active = document.getElementById("app3").classList.contains("active");

  let rows = [];

  if(app1Active){
    rows = [
      ["Cost", cost.value],
      ["NHIL", nh.value],
      ["GETFund", gf.value],
      ["CST", cst1.value],
      ["Tourism Levy", tourism1.value],
      ["VAT", v.value],
      ["Total Levies", t1.value],
      ["VAT Inclusive", vi.value]
    ];
  }

  if(app2Active){
    rows = [
      ["VAT Inclusive", vi2.value],
      ["Cost", c2.value],
      ["NHIL", nh2.value],
      ["GETFund", gf2.value],
      ["CST", cst2.value],
      ["Tourism Levy", tourism2.value],
      ["VAT", v2.value],
      ["Total Levies", t2.value]
    ];
  }

  if(app3Active){
    rows = [
      ["Cost", c3.value],
      ["VAT (3%)", v3.value],
      ["VAT Inclusive", vi3.value]
    ];
  }

  // Draw table
  rows.forEach(r => {
    pdf.rect(18, y - 6, 174, 10);
    pdf.text(r[0], 20, y);
    pdf.text(r[1] || "—", 120, y);
    y += 10;
  });

  y += 8;
  pdf.setFontSize(9);
  pdf.text("Generated by RAS 2026 VAT Calculator", 20, y);

  pdf.save("RAS_VAT_2026.pdf");
}

</script>

</body>
</html>
